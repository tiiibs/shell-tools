
port=5432; allcount=0 ; for out in $(netstat -na | grep "$port" | awk ' {print $5}' | grep -oE "\b([0-9]{1,3}\.){3}[0-9]{1,3}\b"  | grep -vE "(127|0)\.0\.0\.(1|0)" | sort |  uniq); do  count=$(netstat -na | grep "$out" | grep "$port" -c); host_n=$(grep "$out" /etc/hosts | awk '{ print $3}') ; echo  "$host_n $out : $count" ; allcount=$((allcount + count)) ; done; echo "Total : $allcount"
